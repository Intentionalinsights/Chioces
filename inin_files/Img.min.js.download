(function(){'use strict';var Img={init:function(){var self=this;self.buildElements();self.attachEvents();},buildElements:function(){var self=this;self.covers=$('.media_wrap[data-background]');self.load_defer=$('.load_defer[data-image]');},attachEvents:function(){var self=this,data,cover,height,padding;self.covers.each(function(){cover=$(this);data=cover.data();height=cover.data('height')?cover.data('height'):480;$.ajax({'url':'/v2/image/'+data.cover_id,'type':'post','data':{'size':'1920_tall','base64':true},'async':false,'cache':true,beforeSend:function(xhr){xhr.setRequestHeader('AJAX',true);},success:function(response,message){cover.css({'background-image':'url(\''+response+'\')'});if(!cover.hasClass('media_is_cover')){return;}
cover.animate({'padding-top':(height-280)+'px'},1000);}});});self.load_defer.each(function(){var image=$(this),data=image.data(),el,parts,id,size;el=document.createElement('a');el.href=data.image;parts=el.pathname.split(".");parts=parts[0].split("/");parts=parts[2].split("_");if(0 in parts){id=parts[0];}
if(1 in parts){size=parts[1];}
$.ajax({'url':'/v2/image/'+id,'type':'post','data':{'size':size,'base64':true},'async':true,'cache':true,beforeSend:function(xhr){xhr.setRequestHeader('AJAX',true);},success:function(response){image.fadeTo(1000,0.30,function(){image.attr('src',response);}).fadeTo(500,1);}});});}};Base.Img=Img;}());$(document).ready(function(){'use strict';Base.Img.init();});