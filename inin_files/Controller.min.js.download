(function(){'use strict';var Controller={'activeAction':null,init:function(){var self=this;self.buildElements();self.attachEvents();},buildElements:function(){var self=this;self.action_links=$('*[data-action]');},attachEvents:function(){var self=this;self.action_links.on('click',{},self.actionHandler);},initActionLinks:function(el){var self=Controller;$('*[data-action]',el).on('click',{},self.actionHandler);},doAction:function(el){var self=this;self.manualActionHandler(el);},manualActionHandler:function(el){var self=Controller,button=el,data=button.data();return self.actionRequest(button,data);},actionHandler:function(){var self=Controller,button=$(this),data=button.data();return self.actionRequest(button,data);},actionRequest:function(el,data){var self=Controller,action,request,send={},format='json',async=1,result={},cache=0;if(!data.hasOwnProperty('action')){return;}
if(!data.hasOwnProperty('async')){async=data.async;}
if(!data.hasOwnProperty('format')){format=data.format;}
if(!data.hasOwnProperty('cache')){cache=data.cache;}
action=data.action;self.activeAction=action;send=data;if(self.Actions.Before.hasOwnProperty(action)){send=self.Actions.Before[action](send,el);}
if(!send){return;}
request={'url':'/?ajax='+action,'type':'post','data':send,'dataType':format,'async':async,'cache':cache,beforeSend:function(xhr){xhr.setRequestHeader('AJAX',true);},success:function(response){if(self.Actions.After.hasOwnProperty(action)){self.Actions.After[action](send,response,el);}
self.activeAction=null;result=response;}};$.ajax(request);return result;},registerCallback:function(action,Before,After){var self=this;if(action===undefined){return false;}
if(Before!==undefined){self.Actions.Before[action]=Before;}
if(After!==undefined){self.Actions.After[action]=After;}
return true;},'Actions':{'Before':{},'After':{}}};Base.Controller=Controller;}());$(document).ready(function(){'use strict';Base.Controller.init();});